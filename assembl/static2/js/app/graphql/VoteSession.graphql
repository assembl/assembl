#import "./fragments/VoteSession.graphql"

query VoteSession($discussionPhaseId: Int!, $lang: String!) {
  voteSession(discussionPhaseId: $discussionPhaseId) {
    id
    ...voteSessionGlobals
    ...voteSessionLangstringsEntries
    title(lang: $lang)
    subTitle(lang: $lang)
    instructionsSectionTitle(lang: $lang)
    instructionsSectionContent(lang: $lang)
    propositionsSectionTitle(lang: $lang)
    proposals {
      ... on Idea {
        id
        title(lang: $lang)
        description(lang: $lang)
        titleEntries {
          ...langStringEntry
        }
        descriptionEntries {
          ...langStringEntry
        }
        order
      }
    }
    modules: voteSpecifications {
      ... on TokenVoteSpecification {
        id
        voteSessionId
        titleEntries {
          ...langStringEntry
        }
        instructionsEntries {
          ...langStringEntry
        }
        exclusiveCategories
        tokenCategories {
          id
          totalNumber
          typename
          titleEntries {
            ...langStringEntry
          }
          color
        }
      }
      ... on NumberGaugeVoteSpecification {
        id
        voteSessionId
        titleEntries {
          ...langStringEntry
        }
        instructionsEntries {
          ...langStringEntry
        }
        minimum
        maximum
        nbTicks
        unit
      }
      ... on GaugeVoteSpecification {
        id
        voteSessionId
        titleEntries {
          ...langStringEntry
        }
        instructionsEntries {
          ...langStringEntry
        }
        choices {
          id
          value
          labelEntries {
            ...langStringEntry
          }
        }
      }
    }
  }
}
